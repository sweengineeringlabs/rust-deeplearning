# Test Plan: Core Tensor System

**Version:** 1.0
**Status:** Draft
**Spec:** [Feature Spec](../1-requirements/core_tensor_system/core_tensor_system.spec)

## Test Cases

| ID | Test | Verifies | Priority |
|----|------|----------|----------|
| TC-001 | FR-100: Tensor struct with unique `TensorId`, `Arc<Storage>` data, shape, strides, dtype, device (Test) | REQ-001 | Must |
| TC-002 | FR-101: `TensorId` generated via atomic counter for tape tracking (Test) | REQ-002 | Must |
| TC-003 | FR-102: `Storage` enum: `Owned(Vec<u8>)`, `View { parent, offset, len }`, `MMap` (Test) | REQ-003 | Must |
| TC-004 | FR-103: `DType` enum matching rustml-core: F32, F16, BF16, I8, U8, Q8_0, Q4_0, Q4_1 (Test) | REQ-004 | Must |
| TC-005 | FR-104: Thread-local `TensorPool` for buffer recycling during backward pass (Test) | REQ-005 | Should |
| TC-006 | FR-105: Creation ops: `zeros`, `ones`, `randn`, `uniform`, `from_vec`, `arange` (Test) | REQ-006 | Must |
| TC-007 | FR-106: Shape ops: `reshape`, `transpose`, `permute`, `squeeze`, `unsqueeze`, `flatten`, `view` (Test) | REQ-007 | Must |
| TC-008 | FR-107: Indexing ops: `slice`, `index_select`, `gather`, `masked_select` (Test) | REQ-008 | Must |
| TC-009 | FR-108: Element-wise math: add, sub, mul, div, pow, sqrt, exp, log, abs, neg (Test) | REQ-009 | Must |
| TC-010 | FR-109: Reductions: sum, mean, max, min, std, var (Test) | REQ-010 | Must |
| TC-011 | FR-110: `matmul` and `dot` with broadcasting (Test) | REQ-011 | Must |
| TC-012 | FR-111: `conv1d` with stride, padding, and dilation parameters (Test) | REQ-012 | Must |
| TC-013 | FR-112: `concat`, `stack`, `split` tensor joining/splitting (Test) | REQ-013 | Must |
| TC-014 | FR-113: Row-major strides computation and flat offset indexing (Test) | REQ-014 | Must |

