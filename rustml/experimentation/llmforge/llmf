#!/usr/bin/env bash
# llmf â€” llmforge quickstart entrypoint
set -euo pipefail

REPO_ROOT="$(cd "$(dirname "$0")" && pwd)"

usage() {
  echo "Usage: ./llmf <command> [options]"
  echo ""
  echo "Commands:"
  echo "  setup          Check prerequisites and toolchain"
  echo "  build          Build the llmforge CLI"
  echo "    --release      Build in release mode (default: debug)"
  echo "  run [args]     Build if needed and run the CLI"
  echo "    --release      Use release build"
  echo "  test [suite]   Run tests"
  echo "    lib|cli|all (default: all)"
  echo "  info [args]    Shorthand for: llmf run info [args]"
  echo "  download [args] Shorthand for: llmf run download [args]"
}

CMD="${1:-}"
[ -n "$CMD" ] && shift

case "$CMD" in
  setup)         exec "$REPO_ROOT/bin/setup.sh"    "$@" ;;
  build)         exec "$REPO_ROOT/bin/build.sh"    "$@" ;;
  run)           exec "$REPO_ROOT/bin/run.sh"      "$@" ;;
  test)          exec "$REPO_ROOT/bin/test.sh"     "$@" ;;
  info)          exec "$REPO_ROOT/bin/run.sh"      info "$@" ;;
  download)      exec "$REPO_ROOT/bin/run.sh"      download "$@" ;;
  -h|--help|help|"") usage ;;
  *)
    usage
    exit 1
    ;;
esac
